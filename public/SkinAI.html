<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SkinAI</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Poppins:wght@400;600;700&family=Special+Gothic+Expanded+One&display=swap" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Special Gothic Expanded One", sans-serif;
            background: rgb(245, 245, 237);
            background-size: cover;       /* Ensures the image covers the entire section */
            background-repeat: no-repeat; /* Prevents the image from repeating */
            background-position: center;  /* Centers the image within the section */
            color: #333;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        header {
            background-color: #333;
            padding: 20px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
        }

        header .logo {
            font-size: 36px;
            font-weight: bold;
            color: #fff;
            text-decoration: none;
            letter-spacing: 1px;
        }

        nav a {
            color: #fff;
            margin-left: 20px;
            text-decoration: none;
            font-size: 18px;
            transition: color 0.3s;
        }

        nav a:hover {
            color: #6e4b3a;
        }

        .section {
            text-align: center;
            padding: 80px 40px;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .section h1 {
            font-size: 60px;
            margin-bottom: 20px;
        }

        .section p {
            font-size: 28px;
            line-height: 1.6;
            color: #555;
        }

        .button {
            background-color: #6e4b3a;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 30px;
            font-size: 18px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
        }

        .button:hover {
            background-color: #5c3e2a;
            transform: scale(1.05);
        }

        .form-group {
            margin-top: 30px;
            display: flex;
            justify-content: center;
            gap: 20px;
        }

        input[type="file"] {
            background-color: #ffffff20;
            color: #333;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            width: 250px;
        }

        input[type="file"]:focus {
            outline: none;
            background-color: #ffffff40;
        }

        button {
            background-color: #6e4b3a;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 30px;
            font-size: 18px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
        }

        button:hover {
            background-color: #5c3e2a;
            transform: scale(1.05);
        }

        .faq-item button {
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            cursor: pointer;
            width: 100%;
            text-align: left;
        }

        .faq-item button:hover {
            background-color: #5c3e2a;
        }

        .answer {
            display: none;
            margin-top: 10px;
            font-size: 16px;
            color: #555;
        }

        .divider {
            margin-top: 50px;
            border-top: 2px solid #ddd;
        }

        #imagePreview {
            max-width: 300px;
            max-height: 300px;
            margin: 20px auto;
            display: none;
        }
        #results {
            margin-top: 20px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            display: none;
        }

        .model-result {
            margin-bottom: 30px;
            padding: 15px;
            border: 1px solid #eee;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .model-title {
            color: #3498db;
            margin-bottom: 10px;
        }
        .condition {
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
            background-color: #ecf0f1;
        }
        .confidence-bar {
            height: 20px;
            background-color: #bdc3c7;
            border-radius: 3px;
            margin-top: 5px;
            overflow: hidden;
        }
        .confidence-level {
            height: 100%;
            background-color: #2ecc71;
            width: 0%;
            transition: width 1s;
        }
        .verdict {
            font-weight: bold;
            color: #e74c3c;
            margin-top: 15px;
            font-size: 18px;
        }
        .loading {
            display: none;
            margin: 20px;
            text-align: center;
        }
        .spinner {
            border: 5px solid #f3f3f3;
            border-top: 5px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>

<body>

    <header>
        <a href="#" class="logo">SkinAI</a>
        <nav>
            <a href="#home">Home</a>
            <a href="#about">About</a>
            <a href="#faq">FAQ</a>
        </nav>
    </header>

    <!-- Home Section -->
    <div id="home" class="section">
        <div class="main-content">
            <h1>SkinAI</h1>
            <p>AI-powered Skin Analysis for a Healthier You.</p>
        </div>
    </div>

    <!-- About Section -->
    <div id="about" class="section" style="background-color: #f0ece2;">
        <h1>About SkinAI</h1>
        <p>SkinAI is an advanced AI model designed to analyze your skin condition by analyzing images. It helps you monitor skin health by providing insightful feedback, from detecting acne to offering advice on hydration and skincare routines. Upload a clear image of your skin, and our AI will give you valuable insights.</p>

        <div class="upload-container">
            <input type="file" id="fileInput" accept="image/*">
            <p id="fileName"></p>
            
            <img id="imagePreview" alt="Preview">
            
            <div class="loading">
                <div class="spinner"></div>
                <p>Analyzing image...</p>
            </div>
            
            <button id="analyzeBtn" class="upload-btn" style="display: none;" onclick="analyzeImage()">Analyze</button>
        </div>
        
        <div id="results">
            <h2>Results</h2>
            <div id="modelResults"></div>
        </div>
    </div>

    <!-- FAQ Section -->
    <div id="faq" class="section">
        <h1>Frequently Asked Questions</h1>

        <div class="faq-container">
            <div class="faq-item">
                <button onclick="toggleAnswer(1)">How does SkinAI analyze my skin?</button>
                <div id="answer1" class="answer">
                    <p>SkinAI uses AI algorithms to process the image of your skin and identify conditions such as acne, dryness, or inflammation.</p>
                </div>
            </div>

            <div class="faq-item">
                <button onclick="toggleAnswer(2)">What type of images are best for analysis?</button>
                <div id="answer2" class="answer">
                    <p>Clear, well-lit images taken in natural light work best. Avoid using filters or overly close-up shots.</p>
                </div>
            </div>

            <div class="faq-item">
                <button onclick="toggleAnswer(3)">What is SkinAI?</button>
                <div id="answer3" class="answer">
                    <p>SkinAI is an AI-powered website that takes pictures uploaded by users to analyze skin and inform the users weather it is a rash, pimple or clear skin. Using this information, it will make it easier for the students to get their skincare based on their skin type.</p>
                </div>
            </div>

            <!-- <div class="faq-item">
                <button onclick="toggleAnswer(4)">What type of images are best for analysis?</button>
                <div id="answer4" class="answer">
                    <p>.</p>
                </div>
            </div> -->
        </div>
    </div>

    <script>
        function toggleAnswer(id) {
            var answer = document.getElementById("answer" + id);
            answer.style.display = (answer.style.display === "block") ? "none" : "block";
        }

         // Display selected image
         document.getElementById('fileInput').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                document.getElementById('fileName').textContent = file.name;
                
                const reader = new FileReader();
                reader.onload = function(event) {
                    const preview = document.getElementById('imagePreview');
                    preview.src = event.target.result;
                    preview.style.display = 'block';
                    
                    document.getElementById('analyzeBtn').style.display = 'inline-block';
                    document.getElementById('results').style.display = 'none';
                }
                reader.readAsDataURL(file);
            }
        });

        // Send image to Flask backend
        function analyzeImage() {
            const fileInput = document.getElementById('fileInput');
            const resultsDiv = document.getElementById('results');
            const loadingDiv = document.querySelector('.loading');
            const analyzeBtn = document.getElementById('analyzeBtn');
            
            if (!fileInput.files[0]) {
                alert('Please select an image first');
                return;
            }

            // Show loading spinner
            loadingDiv.style.display = 'block';
            analyzeBtn.disabled = true;
            
            const formData = new FormData();
            formData.append('file', fileInput.files[0]);

            fetch('/predict', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                // Hide loading spinner
                loadingDiv.style.display = 'none';
                analyzeBtn.disabled = false;
                
                // Display results
                resultsDiv.style.display = 'block';
                displayAllModelResults(data);
            })
            .catch(error => {
                loadingDiv.style.display = 'none';
                analyzeBtn.disabled = false;
                alert('Error: ' + error.message);
            });
        }

        // Display results for all models
        function displayAllModelResults(data) {
            const modelResultsDiv = document.getElementById('modelResults');
            modelResultsDiv.innerHTML = '';
            
            // Add the uploaded image at the top
            const fileInput = document.getElementById('fileInput');
            modelResultsDiv.innerHTML = `
                <img src="${URL.createObjectURL(fileInput.files[0])}" alt="Uploaded Image" style="max-width: 300px; margin-bottom: 20px;">
            `;
            
            // Create a result card for each model
            for (const [modelName, result] of Object.entries(data.results)) {
                const modelDiv = document.createElement('div');
                modelDiv.className = 'model-result';
                
                let conditionsHTML = '';
                for (const [condition, percentage] of Object.entries(result.percentages)) {
                    conditionsHTML += `
                        <div class="condition">
                            <div>${condition.replace('_', ' ').toUpperCase()}</div>
                            <div>${(percentage * 100).toFixed(1)}%</div>
                            <div class="confidence-bar">
                                <div class="confidence-level" style="width: ${percentage * 100}%"></div>
                            </div>
                        </div>
                    `;
                }
                
                modelDiv.innerHTML = `
                    <h3 class="model-title">${modelName}</h3>
                    ${conditionsHTML}
                    <div class="verdict">
                        FINAL VERDICT: ${result.final_label.replace('_', ' ').toUpperCase()} 
                        (${(result.confidence * 100).toFixed(1)}% confidence)
                    </div>
                `;
                
                modelResultsDiv.appendChild(modelDiv);
            }
        }
    </script>

</body>

</html>
